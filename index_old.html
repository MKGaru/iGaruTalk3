<!DOCTYPE html>
<html lang="ja">
<head>
	<!-- meta data -->
	<link rel="icon" href="favicon.ico">
	<meta charset="UTF-8">
	<meta name="description" content="ブラウザだけで動作する、お手軽なボイスチャットサービスです！　映像通話やファイル転送など、コミュニケーションに必要なツールはいろいろ揃っております！　是非お気軽にお楽しみくださいませ">
	<meta name="author" content="MKGaru@iGaru.com">
	<!-- Mobile viewport optimized: h5bp.com/viewport -->
    <meta name="viewport" content="width=device-width">
    <!-- Use the .htaccess and remove these lines to avoid edge case issues. More info: h5bp.com/i/378 -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="X-FRAME-OPTIONS" content="SAMEORIGIN">
	<!--[if lt IE 9]><script src="html://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<!--JSforCSS-->
	<script src="js/vendor/prefixfree.min.js"></script>
	<!--CSS-->
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.0/themes/smoothness/jquery-ui.css">
	<link rel="stylesheet" href="css/jquery.jizmoztabs.css"><!--jizmoztabsのcssはjsを利用しない場合でも用いる-->
	<link rel="stylesheet" href="css/bootstrap-responsive.min.css">
	<link rel="stylesheet" href="css/layout-default-latest.css" >
	<link rel="stylesheet" href="css/jquery.contextMenu.css">
	<link rel="stylesheet" href="css/jquery.jscrollpane.css">
	<link rel="stylesheet" href="css/jquery_notification.css"><!--上部通知領域用-->
	<link rel="stylesheet" href="css/animate.min.css">
	<link rel="stylesheet" href="css/tree.css">
	<link rel="stylesheet" href="css/main.css">
	<link rel="stylesheet" href="css/page.css">
    <title>iGaruTalk - HTML5(Test)</title>
	<script>
	require('nw.gui').Window.get().showDevTools();
	MediaStreamTrack.getSources(function(streams){
		console.log(streams);
	});
	</script>
	
</head>
<body data-bind="with:app">
	<!--ScriptLoad-->
	<div class="ScriptLoad">
		<script src="http://cdnjs.cloudflare.com/ajax/libs/socket.io/0.9.10/socket.io.min.js"></script><!--nodejs-->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.js"></script>
		<script src="js/vendor/sugar-1.3-full.min.js"></script><!-- 文字変換や配列拡張など-->
		<script src="http://cdnjs.cloudflare.com/ajax/libs/xregexp/2.0.0/xregexp-min.js"></script>
		<script src="js/vendor/bootstrap.min.js"></script>
		<script src="js/vendor/jquery-ui-1.10.0.js"></script><!--Tooltipは除いている（Bootstrapと競合するため）-->
		<script src="js/vendor/jquery.layout-latest.min.js"></script>
		<script src="http://cdnjs.cloudflare.com/ajax/libs/knockout/2.2.1/knockout-min.js"></script>
		<script src="js/vendor/jquery.contextMenu.js"></script>
		<script src="js/vendor/jquery.emotions.js"></script>
		<!--<script src="js/vendor/garlic.min.js"></script><!--入力内容の保持スクリプトv0.1.0-->
		<script src="js/vendor/tinycon.min.js"></script><!--ファビコンの通知-->
		<script src="js/vendor/jquery_notification_v.1.js"></script><!--上部通知領域 リファレンス等: http://demos.9lessons.info/jnotification/index.php-->
		<script src="js/vendor/swfobject.js"></script>
		<script src="js/vendor/jquery.mousewheel.js"></script>
		<script src="js/vendor/mwheelIntent.js"></script>
		<script src="js/vendor/jquery.jscrollpane.js"></script><!--スクロールバー-->
		<script src="js/vendor/plugins.js"></script>
		<script src="js/youtubePlayer.js?1"></script>
		<script src="js/audio.js"></script>
		<script src="js/util.js"></script>
		<script src="js/mediaInsert.js?1"></script>
		<script src="js/filedrag.js"></script>
    	<script src="js/app.js?1"></script>
	</div>
    <!--[if lt IE 10]><style>#swfDialog,#container{display:none;}</style><p class="chromeframe" style="width:100%;height:100%;z-index:1001"><a href="http://www.google.com/chromeframe/?redirect=true">お使いのブラウザで、当サービスをご利用になる場合は、ChromeFrameの導入が必要です.詳細はコチラ</a></p><![endif]-->
	<div id="preLoader">
		<h1>Now Loading...</h1>
	</div>
	<div id="container">
		<nav class="ui-layout-north context-menu-one menu-1" data-bind="with:dataModel">
			<!--ショートカットアイコンを表示するスペース-->
			<button class="btn btn32 online32" 	rel="tooltip" data-original-title="在席状態を変更" 		data-bind="attr: {state:'online'}"><div></div></button>
			<button class="btn btn32 mic32" 	rel="tooltip" data-original-title="マイクを有効/無効を変更" 	data-bind="attr: {state:system.mic}"><div></div></button>
			<button class="btn btn32 webcam32"	rel="tooltip" data-original-title="映像配信を開始/終了"	data-bind="attr: {state:system.camera}"><div></div></button>
			<button class="btn btn32 file32"	rel="tooltip" data-original-title="ファイル転送"			data-bind=""><div></div></button>
			<button class="btn btn32 addCh32"	rel="tooltip" data-original-title="ルーム追加"				data-bind=""><div></div></button>
			<button class="btn btn32 sound32"	rel="tooltip" data-original-title="マスターボリューム"			data-bind="attr: {state:system.sound}"><div></div></button>
			<section id="masterVolume">
				<div class="slider"></div>
			</section>
			
		</nav>
		<div class="ui-layout-center context-menu-one menu-1" id="infotab" style="clear: both">
			<!--タブ項目-->
			<ul>
				<li><a href="#userinfo">	<img src="img/icon16/vcard.png">ユーザ情報</a></li>
				<li><a href="#filetrans">	<img src="img/icon16/folder_go.png">ファイル転送</a></li>
				<li><a href="#youtube">		<img src="img/icon16/youtube.png">Youtube</a></li>
				<li><a href="#media">		<img src="img/icon16/picture.png">Media</a></li>
				<li><a href="#option">		<img src="img/icon16/page.png">オプション</a></li>
			</ul>
			<!--タブ内容-->
			<div id="userinfo" class='scroll-pane'>
				<div class="lipsum">
					<dl>
						<dt>ニックネーム</dt>	<dd class="name">　</dd>
						<dt>状態</dt>		<dd class="state">　</dd>
						<dt>メッセージ</dt>		<dd class="description">　</dd>
						<dt>映像通話</dt>		<dd><button class="btn" disabled>映像通話開始</button></dd>
						<dt>アバター</dt>		<dd><img class="avatar" src="img/icon32/fatcow.png"></dd>
					</dl>
				</div>
			</div>
			<div id="filetrans" class='scroll-pane'>
				<div class="lipsum">
					<h4>ファイル転送</h4>
					<!--<script src="http://9leap.net/games/1012/embed.js"></script>-->
					<ul data-bind="foreach:dataModel.files">
						<li>
							<div class="fileicon" data-bind='style: {backgroundImage: "url(img/icon32/file_ext/file_extension_"+ext+".png)" }'></div>
							<dl>
								<dt>ファイル名</dt>		<dd data-bind="text: name"></dd>
								<dt>サイズ</dt>		<dd data-bind="text: size"></dd>
								<dt>送信者</dt>		<dd data-bind="text: sender"></dd>
								<dt>送信日時</dt>		<dd data-bind="text: time"></dd>
								<dt>ダウンロード</dt>	<dd><progress data-bind="attr:{value:prog},text:prog+'％'" max="100"></progress><span data-bind="text:prog+'％'"></span></dd>
							</dl>
							<!--<div class="util">ダウンロードボタンや、ステートなど</div>-->
						</li>
					</ul>
				</div>
			</div>
			<div id="youtube" class="non-space">
				<!--<h4>Youtube</h4>-->
				<div id="player"></div>
				<div class="menu">
					<i class="Skip icon-forward icon-white" rel="tooltip" data-original-title="次の動画へ"></i>
					<i class="Search icon-search icon-white" rel="tooltip" data-original-title="動画を検索"></i>
				</div>
				<div id="youtubeSearch" title="動画検索">
					<input type="text" placeholder="動画キーワード">
					<ul>
						
					</ul>
				</div>
			</div>
			<div id="media" class="non-space">
				<div class="lipsum">
					<h4>マルチメディア</h4>
					<span>Youtube以外の動画や、ゲーム・画像などはここで確認できます。</span>
				</div>
			</div>
			<div id="option" class='scroll-pane'>
				<div class="lipsum">
					<h4>オプション</h4>
					<form data-persist="garlic">
						<dl>
							<dt>デスクトップ通知</dt>
							<dd><input type="checkbox" id="useNotify"><label for="useNotify">デスクトップ通知を利用する</label></dd>
							
							<dt>カメラ・マイクの許可</dt>
							<dd>
								<section>
									<article id="SWFOption">
										<div id="SWFplaceholder">
											<h1>FlashPlayerがインストールされていないか、古すぎます。</h1>
											<p><a href="http://www.adobe.com/go/getflashplayer">こちらから、Adobe Flash playerを入手してください</a></p>
										</div>
									</article>
									<article>
										<img src="img/samplePrivacy.png">
									</article>
								</section>
							</dd>
							
							<dt>マイクの設定</dt>
							<dd>
								<h5>録音デバイス</h5>
								<select data-bind="foreach:dataModel.system.device.mics">
									<option data-bind="text:$data"></option>
								</select>
								<h5>感度　：<span></span></h5>
								<div id="micSensitivity">
									<div class="slider"></div>
								</div>
								<h5>ブースト　：<span></span></h5>
								<div id="micBoost">
									<div class="slider"></div>
								</div>
							</dd>
							
							<dt>カメラの設定</dt>
							<dd>
								<h5>録画デバイス</h5>
								<select data-bind="foreach:dataModel.system.device.cameras">
									<option data-bind="text:$data"></option>
								</select>
							</dd>
							
							<dt></dt>
							<dd></dd>				
						</dl>
					</form>
				</div>
			</div>
		</div>
		<div class="ui-layout-west context-menu-one menu-1">
			<!--ツリーメニュー-->
			<div class="scroll-pane" style="height:100%;">
				<ol class='tree' data-bind="foreach:dataModel.channels">
					<li>
						<input type="checkbox" data-bind="attr:{id:'Channel_'+name}" checked="checked">
						<label data-bind="attr: {for:'Channel_'+name} , text: name , event: { dblclick: app.ui.channel_dblclick}" onclick="return app.ui.channel_click(event)"></label>
						<ol data-bind="foreach:app.dataModel.users">
							<!-- ko if: channel == $parent.name -->
							<li class='member' data-bind="click: app.tree.selectMember">
								<input type="radio" name="memberselect" data-bind="attr:{id:name}">
								<label data-bind="attr: {for:name},text:name">
									<!--<a href="#" data-bind="text: name"></a>-->
								</label>
							</li>
							<!-- /ko -->
						</ol>
					</li>
				</ol>
			</div>
		</div>
		<div class="ui-layout-south" style="clear: both;overflow: hidden;">
			<div class="textlogPart" id="chatlogtab">
				<!-- チャット・テキストログ -->
				<!-- タブ項目 -->
				<ul style="z-index: 100">
					<li><a data-toggle="tab" href="#System"><img src="img/icon16/house.png">System</a></li>
					<li><a data-toggle="tab" href="#Current"><img src="img/icon16/comments.png"><span data-bind="text: dataModel.self().channel"></span></a></li>
				</ul>

				<!-- タブの内容をforeachで表示 -->
				<div class='tab-contents scroll-pane' id="System">
					<ul class="textlogstyle non-space" data-bind="foreach:dataModel.system.logs" >
						<li>[<time data-bind="text: time"></time>]<span class="sender" data-bind="text: sender"></span>:<span data-bind="text: message"></span></li>
					</ul>
				</div>
				<div class='tab-contents scroll-pane' id="Current">
					<ul class="textlogstyle non-space" data-bind="foreach:getCurrentChannelLog()" >
						<li>[<time data-bind="text: time"></time>]<span class="sender" data-bind="text: sender"></span>:<span data-bind="text: message"></span></li>
					</ul>
				</div>
			</div>
			
			<div class="textbox_wrap">
				<textarea rows="1" id="sendtext" type="text" class="textbox xxlarge" onkeypress="return app.ui.textbox_keypress(event)" onkeyup="return app.ui.textbox_keyup(event)" placeholder="発言するメッセージを入力:"></textarea>
			</div>
			
		</div>
		<!-- ログインフォーム -->
		<div id="dialog-confirm" title="ニックネームとグループの設定">
    		<p><span style="float: left; margin: 0 7px 20px 0;"></span>ニックネームとグループ名を入力してください</p>
			<p id="loginTips" class="alert-error"><span class="ui-icon ui-icon-alert" style="display: inline-block"></span><span id="loginTipsText"></span></p>
			<form data-persist="garlic">
			<fieldset>
				<label for="name">ニックネーム:</label>
				<input type="text" name="name" id="name" value="user" class="text ui-widget-content ui-corner-all" />
				<label for="group">グループ:</label>
				<input type="text" name="group" id="group" value="group1" class="text ui-widget-content ui-corner-all" />
			</fieldset>
			</form>
		</div>
		<!-- ファイル転送確認ダイアログ -->
		<div id="filetransDialog" title="ファイル転送確認">
			<div style="display:table">
				<div style="display:table-cell;width:32px">
					<img id="icon" src="img/icon32/file_ext/file_extension_txt.png" />
				</div>
				<div style="display:table-cell;">
					<p><span></span>&nbsp;<span id="filename"></span>を転送しますか？</p>
				</div>
			</div>
		</div>
		<!-- 汎用入力ダイアログ -->
		<div id="inputDialog" title="">
			<p></p>
			<input>
		</div>
	</div>
	<!-- SWF表示用ダイアログ -->
	<div id="swfDialog">
		<div id="altContent">
			<h1>FlashPlayerがインストールされていないか、古すぎます。</h1>
			<p><a href="http://www.adobe.com/go/getflashplayer">こちらから、Adobe Flash playerを入手してください</a></p>
		</div>
	</div>
	<footer>
		<span>version:alphaDev</span>
		<span style="float: right">Copyright(C)2013 MKGaru All Rights Reserved.</span>
	</footer>


</body>
</html>
